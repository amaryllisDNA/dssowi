---
title: "DS_Project"
author: "Anthéa von Borowski, Mengjiao li, Leonie Demsar"
date: "2024-12-09"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Ressources

### Libraries

```{r lib, message=F}
#install.packages("dplyr")
#install.packages("ggplot2")
#install.packages("readr")
#install.packages("olsrr")
#install.packages("lmtest")
#install.packages("moments")

library(dplyr)
library(ggplot2)
library(readr)
library(lmtest)
library(olsrr)
library(moments)
```

### Data Import

Data has been previously selected and modified in "data_import.Rmd".

```{r dataimport}

baumnyc<-read.csv(here("Data", "Refined", "baumnyc2.csv"))
baumnyc_gp<-read.csv(here("Data", "Refined", "baumnyc_gp2.csv"))

baumnyc$X<-NULL
baumnyc_gp$X<-NULL
```


### Multi-lineare Regression

#### Bäumedensität

H1.1 - Viertel mit höheren Einkommen haben mehr Baümedensität.
H2.1 - Viertel mit nicht-weissen/(Latino- Afroam?) Ethnien haben weniger Baümedensität.

```{r multireg1}

requiredh11<-c( "ZCTA", "mean_income", "eth_white_nonhisp", "eth_afroam_nonhisp", "eth_asian_nonhisp", "eth_hisp", "eth_other", "pop_density", "tree_density")


df_h11<-na.omit(baumnyc_gp[,requiredh11])
df_h11$income_category<-ifelse(df_h11$mean_income<=quantile(df_h11$mean_income, 0.25), 1, 
                               ifelse(df_h11$mean_income<=quantile(df_h11$mean_income, 0.5), 2,
                                      ifelse(df_h11$mean_income<=quantile(df_h11$mean_income, 0.75), 3, 4)))
regh11<-lm(tree_density~mean_income, df_h11_no)
summary(regh11)

summary(df_h11$tree_density)

``` 

```{r tests}

#OUTLIERS

ols_plot_resid_stud(regh11) #no values out of bounds
ols_plot_resid_lev(regh11)
ols_plot_cooksd_chart(regh11)

df_h11_no<-df_h11[-85,]
df_h11_no<-df_h11_no[-4,]

#LINEARITY - erfüllt 

plot(regh11)
pairs(df_h11)
raintest(regh11)

#MULTI-COLINEARITY NONE

#HETEROSKEDASTICITY

plot(regh11)

ols_plot_resid_fit(regh11)
ols_test_breusch_pagan(regh11)

#NORMALITY
ols_plot_resid_qq(regh11)
shapiro.test(regh11$residuals)
kurtosis(regh11$residuals)
agostino.test(regh11$residuals)
anscombe.test(regh11$residuals)
```

